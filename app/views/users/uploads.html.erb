<div class="dashboard-wrapper">
  <div class="dashboard-container">
    <div class="dash-menu-container">
      <% if current_user.influencer? %>
        <%= render 'shared/influencer_dash' %>
      <% else %>
        <%= render 'shared/dash' %>
      <% end %>
    </div>
    <div class="dash-content-container">
      <h2 class="insider-info-title mlb-title text-center">Uploads</h2>
      <hr>
      <div class="account-details-tabs">
        <p class="boldest grey-font account-tab-one all-tabs account-active-tab">Pending (<%= @pending.count %>)</p>
        <span>|</span>
        <p class="boldest grey-font account-tab-two all-tabs">Rejected (<%= @rejected.count %>)</p>
        <span>|</span>
        <p class="boldest grey-font account-tab-three all-tabs">Approved (<%= @approved.count %>)</p>
      </div>
      <div class="account-details-content">
        <div class="account-content-one account-content-show">
          <% @pending.each do |item| %>
            <% if item.class == "Lookbook" %>
              <div class="rejected_row">
                <p><%= item.title %></p>
                <p><%= item.updated_at %></p>
                <%= link_to "View Lookbook", lookbook_path(item) %>
              </div>
            <% else %>
              <div class="rejected_row">
                <p><%= item.title %></p>
                <p><%= item.updated_at %></p>
                <%= link_to "View Tutorial", tutorial_path(item) %>
              </div>
            <% end %>
          <% end %>
        </div>
        <div class="account-content-two">
          <% @rejected.each do |item| %>
            <% if item.class == "Lookbook" %>
              <div class="rejected_row">
                <p><%= item.title %></p>
                <p><%= item.updated_at %></p>
                <%= link_to edit_lookbook_path(item) %>
              </div>
            <% else %>
              <div class="rejected_row">
                <p><%= item.title %></p>
                <p><%= item.updated_at %></p>
                <%= link_to "Edit Tutorial", edit_tutorial_path(item) %>
              </div>
            <% end %>
          <% end %>
        </div>
        <div class="account-content-three">
          <% @approved.each do |item| %>
            <% if item.class == "Lookbook" %>
              <div class="rejected_row">
                <p>Lookbook</p>
                <p><%= item.title %></p>
                <p><%= item.updated_at %></p>
                <p><%= item.affiliate_link %></p>
                <%= link_to "View Lookbook", lookbook_path(item) %>
              </div>
            <% else %>
              <div class="rejected_row">
                <p>Tutorial</p>
                <p><%= item.title %></p>
                <p><%= item.updated_at %></p>
                <p><%= item.affiliate_link %></p>
                <%= link_to "View Tutorial", tutorial_path(item) %>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  tabOne = document.querySelector('.account-tab-one');
  tabTwo = document.querySelector('.account-tab-two');
  tabThree = document.querySelector('.account-tab-three');
  contentOne = document.querySelector('.account-content-one');
  contentTwo = document.querySelector('.account-content-two');
  contentThree = document.querySelector('.account-content-three');

  tabs = document.querySelectorAll('.all-tabs');
  tabs.forEach(function(tab) {
    tab.addEventListener('click', (e) => {
      document.querySelectorAll('.all-tabs').forEach(function(tab) { tab.classList.remove('account-active-tab') });
      e.currentTarget.classList.add('account-active-tab');
    })
  });

  tabOne.addEventListener('click', function() {
    contentOne.classList.add('account-content-show');
    contentTwo.classList.remove('account-content-show');
    contentThree.classList.remove('account-content-show');
  });

  tabTwo.addEventListener('click', function() {
    contentTwo.classList.add('account-content-show');
    contentOne.classList.remove('account-content-show');
    contentThree.classList.remove('account-content-show');
  });

  tabThree.addEventListener('click', function() {
    contentThree.classList.add('account-content-show');
    contentOne.classList.remove('account-content-show');
    contentTwo.classList.remove('account-content-show');
  });


</script>
