<div class="influencerContent_<%= content.id %> influencer-content-wrapper d-none web-menu-transition" data-id="<%= content.id %>">
  <div class="influencer-content-image-container">
    <div class="influencer-content-underlay"></div>
    <%= image_tag 'the-net-white.png', width: 68, class: "mb-3 d-none d-md-block influencer-content-layer" %>
    <% if content.class == Lookbook %>
      <%= image_tag url_for(content.photo), class: 'influencer-content-image influencer-content-layer' %>
    <% else %>
      <% if content.processing? %>
        <div class="d-flex align-items-center justify-content-center flex-column influencer-content-layer" style="width: 100%; height: 600px;">
          <h3>Video is processing</h3>
          <h6><%= content.progress %>% done</h6>
        </div>
      <% else %>
      <div class="position-relative">
        <%= video_tag url_for(content.video), style: "margin: 0 auto;max-width: 80%;max-height: 80%;", id: "tutorial-show-video", playsinline: true, poster: url_for(content.cover_photo), alt: "influencer tutorial video", preload: 'none', class: 'influencer-content-layer' %>
        <div class="video-overlay">
          <%= image_tag 'play-button.png', class: "video-home-play-button influencer-content-layer", width: 80, alt: "play button" %>
        </div>
      </div>
      <% end %>
    <% end %>
    <%= image_tag 'popup_close.png', class: 'close-homepage-pop-up influencer-modal-close d-md-none' %>
  </div>
  <div class="influencer-content-products py-5 px-4 px-lg-5">
    <h5 class="neue-machina ls-sm text-center font-weight-bold">FEATURED PRODUCTS</h5>
    <div class="row my-5 mx-auto justify-content-center">
      <% content.products.each do |product| %>
        <div class="col-12">
          <%= render 'shared/product_cards', product: product %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<script>
  console.log('hello')
  buttons = document.querySelectorAll(`.influencerCard_<%= content.id %>`);
  contentModals = document.querySelectorAll(`.influencer-content-wrapper`);
  buttons.forEach((button) => {
    button.addEventListener('click', () => {
      contentModals.forEach((modal) => {
        console.log(button.dataset.id)
        console.log(modal.dataset.id)
        if (button.dataset.id === modal.dataset.id) {
          modal.classList.remove('d-none');
          setTimeout(function() {
            modal.classList.remove('web-menu-transition');
          }, 200)
        }
      })
    })
  })

  underlays = document.querySelectorAll('.influencer-content-underlay');
  underlays.forEach((underlay) => {
    underlay.addEventListener('click', () => {
      modal = event.currentTarget.parentElement.parentElement
      modal.classList.add('web-menu-transition');
      setTimeout(function() {
        modal.classList.add('d-none');
      }, 200)
    })
  })

  closers = document.querySelectorAll('.influencer-modal-close');
  closers.forEach((close) => {
    close.addEventListener('click', () => {
      modal = event.currentTarget.parentElement.parentElement
      modal.classList.add('web-menu-transition');
      setTimeout(function() {
        modal.classList.add('d-none');
      }, 200)
    })
  })
</script>
