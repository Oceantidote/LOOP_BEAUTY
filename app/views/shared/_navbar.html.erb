<div class="offers-banner">
  <p class="offers-banner-text">FREE SAMPLES WITH EVERY ORDER</p>
</div>
<div class="navbar navbar-expand-sm navbar-light navbar-lewagon">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <%= image_tag 'hamburger.png', width: 25 %>
  </button>
  <div class="navbar-logo">
    <%= link_to "#", class: "navbar-brand" do %>
      <%= image_tag 'loop-beauty-logo.svg' %>
    <% end %>
  </div>
  <div class="navbar-middle">
    <p id="navbar-brands" class="navbar-middle-item">Brands</p>
    <p id="navbar-influencers" class="navbar-middle-item">Influencers</p>
    <%= link_to 'Make-Up', products_path, class: 'navbar-middle-item' %>
    <%= link_to 'Insider','#', class: 'navbar-middle-item' %>
    <%= link_to 'Video','#', class: 'navbar-middle-item' %>
  </div>
  <ul class="navbar-nav">
    <div style="display: flex; align-items: center;">
      <!-- HIDDEN ON MOBILE -->
      <li class="nav-item mobile-hidden">
        <%= link_to 'Follow', 'https://www.instagram.com/loop_beauty/', target: "_blank", class: "nav-link-normal" %>
      </li>
      <span class="mobile-hidden">|</span>
      <li class="nav-item mobile-hidden">
        <%= link_to 'Freebies', '#', class: "nav-link-normal" %>
      </li>
    </div>
    <li class="nav-item mobile-hidden">
      <%= link_to '#', class: "nav-link" do %>
        <%= image_tag 'navbar-search.png' %>
      <% end %>
    </li>
    <li class="nav-item mobile-hidden">
      <%= link_to '#', class: "nav-link" do %>
        <%= image_tag 'navbar-user.png' %>
      <% end %>
    </li>
    <li class="nav-item basket-icon-container mobile-hidden">
      <%= link_to bag_path, class: "nav-link" do %>
        <%= image_tag 'navbar-basket.png' %>
      <% end %>
      <p class="basket-item-count basket-web"><%= @basket.basket_products.count %></p>
    </li>
  </ul>
  <div class="mobile-nav-links-container">
    <div class="mobile-left-links">
      <%= link_to '#', class: "" do %>
        <%= image_tag 'navbar-user.png' %>
      <% end %>
    </div>
    <div class="mobile-left-links" style="margin-left: 5px;">
      <%= link_to '#', class: "" do %>
        <%= image_tag 'navbar-basket.png' %>
      <% end %>
      <p class="basket-item-count basket-mobile"><%= @basket.basket_products.count %></p>
    </div>
  </div>
</div>
<div class="collapse navbar-collapse" id="navbarSupportedContent">
  <ul class="navbar-nav mr-auto">
    <% if user_signed_in? %>
      <li class="nav-item ">
        <%= link_to "Home", "#", class: "nav-link" %>
      </li>
      <li class="nav-item">
        <%= link_to "Messages", "#", class: "nav-link" %>
      </li>
      <li class="dropdown">
        <%= image_tag 'navbar-user.png', class: "nav-link dropdown-toggle", id: "navbarDropdown", data: { toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
          <%= link_to "Action", "#", class: "dropdown-item" %>
          <%= link_to "Another action", "#", class: "dropdown-item" %>
          <%= link_to "Log out", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
        </div>
      </li>
    <% else %>
      <!-- SHOWING ON MOBILE -->
      <li class="nav-item">
        <%= link_to "Brands", "#", class: "nav-link mobile-dropdown-options" %>
      </li>
      <li class="nav-item">
        <%= link_to "Influencers", "#", class: "nav-link mobile-dropdown-options" %>
      </li>
      <li class="nav-item">
        <%= link_to "Make Up", "#", class: "nav-link mobile-dropdown-options" %>
      </li>
      <li class="nav-item">
        <%= link_to "Insider", "#", class: "nav-link mobile-dropdown-options" %>
      </li>
      <li class="nav-item">
        <%= link_to "Video", "#", class: "nav-link mobile-dropdown-options" %>
      </li>
      <!-- SHOWING ON MOBILE -->
    <% end %>
  </ul>
</div>
<!-- HIDDEN BRANDS BAR -->
<!-- <div class="mobile-dropdown-options-brands">
  <ul class="navbar-nav mr-auto">
    <li class="back-to-menu">
      <div class="dropdown-back-container">
        <%#= image_tag 'dropdown-back.png', height: 15, class: "dropdown-back" %>
      </div>
      Brands</li>
    <%# @brands.each do |brand| %>
      <%#= link_to brand_path(brand), class: "each-brand" do %>
        <li class="nav-item each-brand-dropdown">
          <%#= brand.name %>
        </li>
      <%# end %>
    <%# end %>
  </ul>
</div> -->
<!-- HIDDEN BRANDS BAR -->
<!-- HIDDEN INFLUENCERS BAR -->
<!-- <div class="mobile-dropdown-options-influencers">
  <ul class="navbar-nav mr-auto">
    <li class="back-to-menu">
      <div class="dropdown-back-container">
        <%#= image_tag 'dropdown-back.png', height: 15, class: "dropdown-back" %>
      </div>
      Influencers</li>
    <%# @influencers.each do |influencer| %>
      <%#= link_to :root, class: "each-influencer" do %>
        <li class="nav-item each-influencer-dropdown">
          <%#= influencer.first_name.capitalize %> <%#= influencer.last_name.capitalize %>
        </li>
      <%# end %>
    <%# end %>
  </ul>
</div> -->
<!-- HIDDEN INFLUENCERS BAR -->
<div class="navbar-submenu navbar-submenu-brands">
  <div class="navbar-submenu-container">
    <% @brands.each do |brand| %>
      <%= link_to brand_path(brand), class: "each-brand" do %>
        <%= brand.name %>
      <% end %>
    <% end %>
  </div>
</div>
<div class="navbar-submenu navbar-submenu-influencers">
  <div class="navbar-submenu-container">
    <% @influencers.each do |influencer| %>
      <%= link_to :root, class: "each-brand" do %>
        <%= influencer.first_name %> <%= influencer.last_name %>
      <% end %>
    <% end %>
  </div>
</div>
<div class="navbar-submenu-underlay"></div>

<script>
  navbarBrands = document.getElementById('navbar-brands');
  menuBrands = document.querySelector('.navbar-submenu-brands');
  navbarInfluencers = document.getElementById('navbar-influencers');
  menuInfluencers = document.querySelector('.navbar-submenu-influencers');
  subnavUnderlay = document.querySelector('.navbar-submenu-underlay');

  navbarBrands.addEventListener('mouseover', function() {
    menuBrands.style.display = "flex";
    subnavUnderlay.style.display = "block";
  });

  navbarBrands.addEventListener('mouseleave', function() {
    menuBrands.style.display = "none";
    subnavUnderlay.style.display = "none";
  });

  menuBrands.addEventListener('mouseover', function() {
    menuBrands.style.display = "flex";
    subnavUnderlay.style.display = "block";
  });

  menuBrands.addEventListener('mouseleave', function() {
    menuBrands.style.display = "none";
    subnavUnderlay.style.display = "none";
  });

  navbarInfluencers.addEventListener('mouseover', function() {
    menuInfluencers.style.display = "flex";
    subnavUnderlay.style.display = "block";
  });

  navbarInfluencers.addEventListener('mouseleave', function() {
    menuInfluencers.style.display = "none";
    subnavUnderlay.style.display = "none";
  });

  menuInfluencers.addEventListener('mouseover', function() {
    menuInfluencers.style.display = "flex";
    subnavUnderlay.style.display = "block";
  });

  menuInfluencers.addEventListener('mouseleave', function() {
    menuInfluencers.style.display = "none";
    subnavUnderlay.style.display = "none";
  });
</script>
