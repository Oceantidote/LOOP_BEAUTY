<div class="dashboard-wrapper">
  <div class="dashboard-container-title mb-3 px-3 px-md-0">
    <h4 class="ls-xs mb-0 <%= 'mb-2' unless current_user.influencer %>"><%= current_user.influencer ? "influencer portal" : "my profile" %></h4>
    <% if current_user.influencer? %>
      <div class="d-flex justify-content-center align-items-center">
        <p class="m-0 lighter ls-xs d-none d-sm-block">hello, <%= current_user.first_name %></p>
        <%= image_tag url_for(current_user.avatar_photo), class: 'avatar-large ml-3' %>
      </div>
    <% end %>
  </div>
  <div class="dashboard-container">
    <div class="dash-menu-container">
      <% if current_user.admin? %>
        <%= render 'admin/shared/admin_dash' %>
      <% else %>
        <%= render 'shared/influencer_dash' %>
      <% end %>
    </div>
    <div class="dash-content-container">
      <p class="ls-xs mb-3 mb-md-2 pl-3 pl-md-0">welcome</p>
      <div class="dash-content dash-new-lookbook-container justify-content-center pt-4">
        <%= simple_form_for @lookbook, html: { class: 'dash-new-lookbook' } do |f| %>
          <div class="d-flex justify-content-center">
            <%= image_tag 'upload-lookbook.png', class: 'dash-new-lookbook-img' %>
          </div>
          <p class="ls-xs lighter text-center mt-3">upload lookbook</p>
          <% if current_user.admin %>
            <%= f.input :user_id, collection: @users, label_method: ->(user){ "#{user.full_name}" }, label: false, prompt: 'influencer', input_html: { class: 'contact-form-input mb-3' } %>
          <% end %>
          <%= f.input :title, label: false, placeholder: 'title', input_html: { class: 'contact-form-input mb-3' } %>
            <div class="dash-upload-photo">
              <%= f.input :photo, input_html: { class: 'd-none photo-input', 'data-name': 'lookbook-photo', onchange: "displayPreview(this)" }, label_html: { class: 'upload-photo'}, label: 'choose photo' %>
              <% if @lookbook.photo.attached? %>
                <%= image_tag url_for(@lookbook.photo), height: 100, class: "photo-preview", 'data-name': 'lookbook-photo', alt: "Lookbook photo preview" %>
              <% else %>
                <%= image_tag "", width: 100, class: "d-none photo-preview", 'data-name': 'lookbook-photo', alt: "Lookbook photo preview" %>
              <% end %>
            </div>
          <%= f.input :description, label: false, placeholder: 'description', input_html: { class: 'contact-form-input mb-3' } %>
          <%= f.input :product_ids, label: false, collection: Product.all, label_method: ->(product){ "#{product.title} (#{product.brand.name})" }, input_html: { multiple: true, style: "overflow: scroll", class: 'contact-form-input mb-3' } %>
          <div class="d-flex justify-content-center pb-4 pt-3">
            <%= f.submit 'submit', class: 'primary-button dash-share-button small-text mx-auto my-0' %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<%= content_for(:after_js) do %>
  <%= javascript_pack_tag 'components/photo_preview' %>
<% end %>
