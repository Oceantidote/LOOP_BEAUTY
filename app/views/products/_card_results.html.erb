<div class="products-index-container">
  <div class="partial-filters-one">
    <h4>Refine By</h4>
    <div>
      <h6 class="transparent-filter">Sort By: New In</h6>
    </div>
  </div>
  <div class="partial-filters-two">
    <%= simple_form_for Product.new, url: products_path, method: :get do |f| %>
      <div class="partial-filters">
        <div class="partial-filters_collection">
          <h6>Category</h6>
          <%#= collection_check_boxes :category, :product_id, Category.all, :id, :name %>
          <%= f.input :category, collection: Category.all, as: :check_boxes, required: false, label: "", input_html: { onchange: "this.form.submit()" } %>
        </div>
        <div class="partial-filters_collection">
          <h6>Brand</h6>
          <%#= collection_check_boxes :brand, :product_id, Brand.all, :id, :name %>
          <%= f.input :brand, collection: Brand.all, as: :check_boxes, required: false, label: "", input_html: { onchange: "this.form.submit()" } %>
        </div>
        <%#= f.button :submit, "Filter", class: "primary-button" %>
      </div>
    <% end %>
  <!--   <div class="partial-products">
      <%# @products.each do |product| %>
        <div class="card">
          <%#= link_to product_path(product) do %>
            <div class="card_image">
              <%#= image_tag product.shades.first.photos.first.variant(resize: "100x100") %>

            </div>
          <%# end %>
          <div class="card_header">
            <%#= product.title %>
          </div>
        </div>
        <%#= hidden_field_tag :query , "", id: "query-filter" %>
        <%#= hidden_field_tag :place , "", id: "place-filter" %>

        <%#= submit_tag 'Apply', id: "filter-button" %>
      <%# end %>
    </div> -->
  <!--   <div class="partial-products" id="results">
        <%#= render 'card_results', products: @products %>
    </div> -->
    <div class="row" style="flex: 1;">
      <% products.each do |product| %>
        <div class="col-xs-12 col-sm-6 col-md-4 d-flex justify-content-center" style="padding: 5px;">
          <div class="card-image-results">
            <div class="card">
              <%= link_to product_path(product) do %>
                <div class="card_image">
                  <%= link_to product_path(product) do %>
                    <%= image_tag url_for(product.shades.first.photos.first) %>
                  <% end %>
                </div>
              <% end %>
              <div class="card_header">
                <p><%= product.title %></p>
              </div>
              <div class="card_price-heart">
                <%= humanized_money_with_symbol(product.price) %>
              </div>
              <div class="card_ratings">
                <% if product.average_rating == 0 %>
                 <% 5.times do %>
                  <p><i class="far fa-star"></i></p>
                  <% end %>
                 <p>(0) Reviews</p>
                <% else  %>
                  <% product.average_rating.times do %>
                    <p><i class="fas fa-star"></i></p>
                  <% end %>
                  <p><%= product.total_reviews %></p>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

<script>
  let query = document.getElementById('query').value
  let place = document.getElementById('place').value
  let queryFilter = document.getElementById('query-filter')
  let placeFilter = document.getElementById('place-filter')
  queryFilter.value = query
  placeFilter.value = place
</script>
